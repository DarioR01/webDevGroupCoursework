import{e as u,o as f,b as h,a as e,t as a,f as d,g as l,v as n,F as b,j as r}from"./index.27c418c6.js";const _={class:"container mb-5"},y={class:"row"},g={class:"col-md-3"},v={class:"d-flex flex-column p-4 py-6 align-items-center text-center img_container"},w=["src"],S={class:"font-weight-bold"},k={class:"text-black-50"},F={class:"text-black-50"},I={class:"text-black-50"},P={class:"col-md-5 border-right"},T={class:"p-3"},D=e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[e("h4",{class:"text-right"},"Edit Profile")],-1),U={class:"row mt-3"},V={class:"col-md-6"},j=e("label",null,"Name",-1),C={class:"col-md-6"},E=e("label",null,"Surname",-1),O={class:"col-md-6"},B=e("label",null,"Email",-1),$={class:"col-md-6"},N=e("label",null,"DOB",-1),R=e("div",{class:"col-md-6"},[e("label",null,"Password")],-1),A=e("div",{class:"row mt-6"},null,-1),H=e("div",{class:"mt-3"},[e("button",{class:"btn btn-primary profile-button",type:"submit"}," Save Profile ")],-1),X=e("button",{class:"btn btn-primary profile-button",type:"submit"},"Upload Image",-1),J={class:"container align-items-center mt-5"},M={class:"row"},G=e("h4",null,"Add Items",-1),q={class:"row mt-2"},z={class:"col-md-3 mb-3"},K={class:"col-md-3 mb-3 d-flex"},L=e("span",{class:"h2"},"\xA3",-1),Q={class:"mb-3"},W=e("label",{for:"item"},"Bid End Date & Time:",-1),Y={class:"col-md-6"},Z={class:"mb-3"},x=e("div",{class:"d-flex justify-content-between align-items-center mt-3"},[e("button",{type:"submit",class:"btn btn-primary mb-5 btn-sm"},"Submit Item")],-1),ee={data(){return{details:this.get_details(),name:"",surname:"",email:"",dob:"",file:"",title:"",price:"",end_date:"",item_image:"",description:"",$refs:{file:{files:[]},itemFile:{files:[]}}}},methods:{async get_details(){const t=await(await fetch("http://localhost:8000/bidder/api/profile/",{method:"GET",credentials:"include",mode:"cors",referrerPolicy:"no-referrer"})).json();this.details=t},async updateImg(){const o=new FormData;o.append("file",this.file);const t=new Headers([["X-CSRFToken",r("csrftoken")]]),i=await(await fetch("http://localhost:8000/bidder/api/profile/",{method:"POST",credentials:"include",mode:"cors",referrerPolicy:"no-referrer",headers:t,body:o})).json();this.details.image_name=i.image},async uploadFile(){this.file=this.$refs.file.files[0]},async edit(){const o=Date.parse(this.dob),t=new Headers([["X-CSRFToken",r("csrftoken")]]),i=await(await fetch("http://localhost:8000/bidder/api/profile/",{method:"PUT",credentials:"include",mode:"cors",referrerPolicy:"no-referrer",headers:t,body:JSON.stringify({name:this.name,surname:this.surname,email:this.email,date_of_birth:o})})).json();this.details=i},async item(){let o=new Date(this.end_date).getTime();const t=new Headers([["X-CSRFToken",r("csrftoken")]]),s=await fetch("http://localhost:8000/bidder/api/profile/",{method:"POST",credentials:"include",mode:"cors",referrerPolicy:"no-referrer",headers:t,body:JSON.stringify({title:this.title,price:this.price,final_date:o,description:this.description})});if(s.status===200){const c=(await s.json()).id,m=new FormData;m.append("file",this.item_image);const p=await fetch(`http://localhost:8000/bidder/api/profile/${c}`,{method:"POST",credentials:"include",mode:"cors",referrerPolicy:"no-referrer",headers:t,body:m});this.title="",this.price="",this.end_date="",this.description="",this.item_image="",s.status===200&&p.status===200?alert("item successfully submitted"):alert("There has been an issue with the image file, and your item has been submitted without images")}else alert("Item could not be submitted, make sure your fields are correct")},async uploadItemImg(){this.item_image=this.$refs.itemFile.files[0]}}},se=u({...ee,__name:"index",setup(o){return(t,s)=>(f(),h(b,null,[e("div",_,[e("div",y,[e("div",g,[e("div",v,[e("img",{class:"img-fluid",src:`http://localhost:8000/static/${t.details.image_name}`},null,8,w),e("span",S,a(t.details.name),1),e("span",k,a(t.details.surname),1),e("span",F,a(t.details.email),1),e("span",I,a(t.details.date_of_birth),1)])]),e("div",P,[e("form",{class:"form-outline",onSubmit:s[6]||(s[6]=d((...i)=>t.edit&&t.edit(...i),["prevent"]))},[e("div",T,[D,e("div",U,[e("div",V,[j,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=i=>t.name=i),placeholder:"first name"},null,512),[[n,t.name]])]),e("div",C,[E,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=i=>t.surname=i),placeholder:"surname"},null,512),[[n,t.surname]])]),e("div",O,[B,l(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=i=>t.email=i),placeholder:"Email"},null,512),[[n,t.email]])]),e("div",$,[N,l(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=i=>t.dob=i),placeholder:"date of birth"},null,512),[[n,t.dob]])]),R]),A,H]),e("form",{onSubmit:s[5]||(s[5]=d((...i)=>t.updateImg&&t.updateImg(...i),["prevent"]))},[e("input",{type:"file",ref:"file",onChange:s[4]||(s[4]=(...i)=>t.uploadFile&&t.uploadFile(...i))},null,544),X],32)],32)])])]),e("form",{class:"form-outline",onSubmit:s[12]||(s[12]=d((...i)=>t.item&&t.item(...i),["prevent"]))},[e("div",J,[e("div",M,[G,e("div",q,[e("div",z,[l(e("input",{type:"text","onUpdate:modelValue":s[7]||(s[7]=i=>t.title=i),class:"form-control",placeholder:"title"},null,512),[[n,t.title]])]),e("div",K,[e("div",null,[l(e("input",{type:"number",min:1,"onUpdate:modelValue":s[8]||(s[8]=i=>t.price=i),class:"form-control",placeholder:"starting price"},null,512),[[n,t.price]])]),L]),e("div",Q,[W,l(e("input",{type:"datetime-local","onUpdate:modelValue":s[9]||(s[9]=i=>t.end_date=i),id:"item",name:"birthday"},null,512),[[n,t.end_date]])]),e("div",Y,[l(e("textarea",{class:"form-control mb-3","onUpdate:modelValue":s[10]||(s[10]=i=>t.description=i),placeholder:"Add description",rows:"3"},null,512),[[n,t.description]])]),e("div",Z,[e("input",{type:"file",ref:"itemFile",onChange:s[11]||(s[11]=(...i)=>t.uploadItemImg&&t.uploadItemImg(...i))},null,544)])]),x])])],32)],64))}});export{se as default};
